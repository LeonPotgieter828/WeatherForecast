@page
@model IndexModel
@{
    ViewData["Title"] = "Index";
}

<h2 style="text-align: center; font-size: 40px; font-weight: 700; margin-bottom: 50px">Weather of Today</h2>
<form class="search-container" method="Post">
        <input id="searchName" class="search-bar" type="text" placeholder="Search" asp-for="SearchName" />
        <input class="search-button" type="image" alt="Sumit" src="images/glass.png"/>
</form>
<div id="reload">
    <container class="current-container">
        <div class="current-box">
            @foreach (var item in Model.nested.NestedF.Location)
            {
                <h3>Location</h3>
                <p class="location"><span>@item.Region</span>, @item.City</p>
            }
        </div>
        <div class="current-info-box">
            <div class="box">
                <div class="local-box">
                    <div class="local-icon">
                        <img src="images/temp.png"/>
                    </div>
                    <p><span>@Model.nested.NestedF.CrForecast.Tempareture</span>°</p>
                </div>
                <div class="local-box">
                    <div class="local-icon">
                        <img src="images/wind-direction.png"/>
                    </div>
                    <p><span>@Model.nested.NestedF.CrForecast.WindDirection</span>°</p>
                </div>
            </div>
            <div class="box2">
                <p class="weather-code">@Model.nested.NestedF.CrForecast.WeatherCodeString</p>
                <div class="weather-icon">
                    <img src="images/sun.png"/>
                </div>
            </div>
            <div class="box">
                <div class="local-box">
                    <div class="local-icon">
                        <img src="images/wind.png"/>
                    </div>
                    <p><span>@Model.nested.NestedF.CrForecast.WindSpeed</span> km/h</p>
                </div>
                <div class="local-box">
                    <div class="local-icon">
                        <img src="images/day-and-night.png"/>
                    </div>
                    <p>@Model.nested.NestedF.CrForecast.DayOrNight</p>
                </div>
            </div>
        </div>

        <div class="hourly-container">
            @for (int i = 0; i < Model.nested.NestedF.HrForecast.Rain.Count; i++)
            {
                <div class="hourly-box">
                    <p class="timeHead">@Model.nested.NestedF.HrForecast.TimeString[i]</p>
                    <div class="hourly-img">
                        <img src="images/time-temp.png"/>
                    </div>
                    <p><span>@Model.nested.NestedF.HrForecast.Temp[i]</span>°</p>
                    <div class="hourly-img">
                        <img src="images/drop.png"/>
                    </div>
                    <p>@Model.nested.NestedF.HrForecast.Rain[i]<span style="font-size: 13px">mm<span></span></p>
                </div>
            }
        </div>
    </container>



    <container class="daily-container">

            @for(int i = 0; i < Model.nested.NestedF.DlForecast.MaxTempareture.Count; i++)
            {
            <div class="daily-box">
                <p class="date">@Model.nested.NestedF.DlForecast.Date[i].ToString("dddd")</p>
                <svg class="weather"
                     version="1.1"
                     id="Layer_1"
                     x="0px"
                     y="0px"
                     width="50px"
                     height="50px"
                     viewBox="0 0 100 100"
                     xml:space="preserve">
                <image id="image0"
                       width="100"
                       height="100"
                       x="0"
                       y="0"
                       href="data:image/png;base64,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"></image>
            </svg>
                <div class="minmaxContainer">
                    <div class="min">
                        <p class="minHeading">min</p>
                        <p class="minTemp">@Model.nested.NestedF.DlForecast.MinTempareture[i]</p>
                    </div>
                    <div class="max">
                        <p class="maxHeading">max</p>
                        <p class="maxTemp">@Model.nested.NestedF.DlForecast.MaxTempareture[i]</p>
                    </div>
                </div>
                <p class="weather">@Model.nested.NestedF.DlForecast.WindSpeed[i] km/h</p>
                <p class="weather">@Model.nested.NestedF.DlForecast.RainSum[i] mm</p>
            </div>
            }
    </container>



    <div class="compare-container">
        <div class="con">
            <h4>History Forecast</h4>
            <table class="table">
                <thead>
                    <th>Date</th>
                    <th>Tempareture</th>
                    <th>Wind Speed</th>
                </thead>
                <tbody>
                    @for (int i = 1; i < 6; i++)
                    {
                        <tr>
                            <td>@Model.nested.NestedH.History.Recorded[i]</td>
                            <td>@Model.nested.NestedH.History.Temp[i]<span>°</span></td>
                            <td>@Model.nested.NestedH.History.WindSpeed[i] <span>km/h</span></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div> 
    
        <div class="con">
            <h4>Daily Forecast</h4>
            <table class="table">
                <thead>
                    <th>Date</th>
                    <th>Tempareture</th>
                    <th>Wind Speed</th>
                </thead>
                <tbody>
                    @for (int i = 0; i < 5; i++)
                    {
                        <tr>
                            <td>@Model.nested.NestedF.DlForecast.Date[i]</td>
                            <td>@Model.nested.NestedF.DlForecast.MaxTempareture[i]<span>°</span></td>
                            <td>@Model.nested.NestedF.DlForecast.WindSpeed[i] <span>km/h</span></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="con2">
            <h4>Averages Daily Forecast</h4>
            <table class="table">
                <thead>
                    <th>Tempareture</th>
                    <th>Wind Speed</th>
                </thead>
                <tbody>
                    @for (int i = 0; i < Model._trend.TempAvg.Count; i++)
                    {
                        <tr>
                            <td>@Model._trend.TempAvg[i]<span>°</span></td>
                            <td>@Model._trend.WindAvg[i] <span>km/h</span></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const searchName = document.getElementById("searchName").value || "Port Elizabeth";
    setInterval(() => {
        window.location.href = `/Index?SearchName=${encodeURIComponent(searchName)}`;
    }, 300000);
</script>

<style>
    p{
        margin: 0;
    }

    h4{
        margin: 0;
        margin-top: 8px;
        font-size: 22px;
        color: white;
        text-align: center;
    }

    h3{
        font-weight: 700;
        font-size: 30px;
        letter-spacing: 1.2px;
        color: white;
    }

    .search-container{
        display: flex;
        width: 100%;
        align-items: center;
        justify-content: center;
        margin-bottom: 40px;
        column-gap: 8px;
    }

    .search-container .search-bar{
        display: flex;
        width: 45%;
        background: rgba(10, 10, 10, 0.8);
        border-radius: 20px;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 8px;
        padding-bottom: 8px;
        color: white;
    }
    
    .search-button{
        width: 42px;
    }

    .current-container{
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        column-gap: 40px;
        margin-bottom: 40px;
    }



    .current-info-box p{
        font-size: 18px;
        font-weight: 600;
        color: white;
    }
    
    .current-info-box .weather-code{
        font-size: 22px;
        font-weight: 600;
        color: white;
    }

    .current-box{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 280px;
        height: 250px;
        border: none;
        border-radius: 10px;
        background-color: rgba(10, 10, 10, 0.8);
        color: white;
        box-shadow: 5px 5px 30px rgb(25, 25, 25);
        border-top: #D9D9D9 2px solid;
        border-left: #D9D9D9 2px solid;
    }

        .current-box .location{
            font-size: 18px;
            font-weight: 600;
            color: white;
        }

    .current-info-box{
        display: flex;
        width: 600px;
        height: 250px;
        border-radius: 10px;
        background-color: rgba(10, 10, 10, 0.8);
        color: white;
        box-shadow: 5px 5px 30px rgb(25, 25, 25);
        border-top: #D9D9D9 2px solid;
        border-left: #D9D9D9 2px solid;
    }

    .current-info-box .box{
        display: flex;
        flex-direction: column;
        flex: 1;
        row-gap: 20px;
        align-items: center;
        justify-content: center;
    }

    .local-box{
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
    }

    .local-icon{
        width: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .local-icon img{
        width: 100%;
    }
    
    .box2{
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        row-gap: 8px;
    }

    .weather-icon{
        display: flex;
        align-items: center;
        width: 150px;
    }

        .weather-icon img{
            width: 100%;
        }

    .hourly-container{
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        overflow-y: auto;
        row-gap: 5px;
        height: 250px;
        padding: 10px;
    }

    .hourly-box{
        display: flex;
        background-color: rgba(10, 10, 10, 0.8);
        width: 240px;
        padding-top: 25px;
        padding-bottom: 25px;
        align-content: center;
        justify-content: center;
        border-radius: 10px;
        border: none;
        flex-shrink: 0;
        column-gap: 8px;
        box-shadow: 0px 0px 10px rgb(25, 25, 25);
        border: #D9D9D9 1px solid;
    }

        .hourly-box p{
            color: white;
            margin: 0;
            text-align: center;
            height: 20px;
        }

        .hourly-box .hourly-img {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            margin-left: 8px;
        }

            .hourly-box .hourly-img img{
                width: 100%;
            }


    .compare-container{
        display: flex;
        column-gap: 10px;
    }
        .con{
            display: flex;
            flex-direction: column;
            align-content: center;
            justify-content: center;
            background-color: rgba(10, 10, 10, 0.8);
            border-radius: 10px;
            flex: 1;
            box-shadow: 0px 0px 10px rgb(25, 25, 25);
            border: black 1.5px solid;
        }
        
        .con2{
            display: flex;
            flex-direction: column;
            align-content: center;
            justify-content: center;
            background-color: rgba(10, 10, 10, 0.8);
            border-radius: 10px;
            width: 300px;
            box-shadow: 0px 0px 10px rgb(25, 25, 25);
            border: black 1.5px solid;
        }

    .table{
        border-collapse: separate;
        border-spacing: 0 5px;
        background-color: transparent;
        width: 100%;
        border-radius: 5px;
        padding: 10px;
    }

        .table th, .table td{
            padding: 10px;
            text-align: center;
            color: white;
            position: relative;
        }

        .table th:not(:last-child),
        .table td:not(:last-child){
           border-right: 2px solid rgba(255, 255, 255, 0.2);
        }

    .table td{
            border-bottom: 1.5px solid rgba(255, 255, 255, 0.1);
            padding-left: 5px;
            padding-right: 5px;
    }

   
   

    .daily-container{
        display: flex;
        column-gap: 10px;
        margin-bottom: 40px;
    }

    .daily-box {
        position: relative;
        width: 220px;
        height: 220px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 20px 10px;
        border-radius: 10px;
        backdrop-filter: blur(30px);
        background-color: rgba(10, 10, 10, 0.8);
        border: 1px solid #D9D9D9;
        cursor: pointer;
    }

    .date {
        font-weight: 700;
        font-size: 0.9em;
        letter-spacing: 1.2px;
        color: white;
    }

    .weather {
        font-weight: 500;
        font-size: 0.7em;
        letter-spacing: 1.2px;
        color: rgb(197, 197, 197);
    }

    .temp {
        font-size: 1.8em;
        color: white;
    }

    .minmaxContainer {
        width: 100%;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .min,
    .max {
        width: 50%;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        padding: 0px 20px;
        gap: 4px;
    }

    .max {
        align-items: flex-start;
        border-left: 2px solid white;
    }

    .maxHeading,
    .minHeading {
        font-size: 0.7em;
        font-weight: 600;
        color: white;
    }

    .maxTemp,
    .minTemp {
        font-size: 0.6em;
        font-weight: 500;
        color: white;
    }

    .cardContainer::before {
        width: 100px;
        height: 100px;
        content: "";
        position: absolute;
        background-color: rgb(144, 161, 255);
        z-index: -1;
        border-radius: 50%;
        left: 100px;
        top: 50px;
        transition: all 1s;
    }

    .cardContainer:hover::before {
        transform: translate(-50px, 50px);
    }

</style>





